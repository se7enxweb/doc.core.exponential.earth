
<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style type="text/css">
    @import url(https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/stylesheets/core.css);
    @import url(https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/stylesheets/pagelayout.css);
    @import url(https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/stylesheets/classes.css);
    @import url(https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/stylesheets/monitor.css);
</style>

<link type="text/css" rel="stylesheet" href="https://web.archive.org/web/20071223171605cs_/http://ez.no/extension/ezno2005/design/ezno2005/stylesheets/print.css" media="print"/>

    <link rel="alternate" title="ez.no News" href="https://web.archive.org/web/20071223171605/http://ez.no/rss/feed/news" type="application/rss+xml"/><link rel="alternate" title="ez.no Developer News" href="/web/20071223171605/http://ez.no/rss/feed/communitynews" type="application/rss+xml"/>
<link rel="alternate" title="ez.no Developer Articles" href="https://web.archive.org/web/20071223171605/http://ez.no/rss/feed/community_articles" type="application/rss+xml"/>
<link rel="alternate" title="ez.no Forum" href="https://web.archive.org/web/20071223171605/http://ez.no/rss/feed/forum" type="application/rss+xml"/>
<link rel="alternate" title="ez.no Contributions" href="https://web.archive.org/web/20071223171605/http://ez.no/rss/feed/contribs" type="application/rss+xml"/>
<link rel="alternate" title="ez.no Open Funding" href="https://web.archive.org/web/20071223171605/http://ez.no/rss/feed/openfunding_suggestions" type="application/rss+xml"/>


<!-- IE conditional comments; for bug fixes for different IE versions -->
<!--[if IE 5]>     <style type="text/css"> @import url(/extension/ezno2005/design/ezno2005/stylesheets/ie5.css);    </style> <![endif]-->
<!--[if lte IE 6]> <style type="text/css"> @import url(/extension/ezno2005/design/ezno2005/stylesheets/ie6lte.css); </style> <![endif]-->
<!--[if gte IE 6]> <style type="text/css"> @import url(/extension/ezno2005/design/ezno2005/stylesheets/ie6gte.css); </style> <![endif]-->

<!-- Load special stylesheet (if necessary) for newer Netscape decendants, Mozilla and Firefox, using the Gecko renderer -->
<script type="text/javascript"><!-- if ((navigator.userAgent.indexOf("Gecko") != -1)&&(navigator.userAgent.indexOf("KHTML") == -1)) document.write("<style type=\"text/css\">@import url(/extension/ezno2005/design/ezno2005/stylesheets/gecko.css);</style>");--></script>
                                                                                    
<title>
            Non-Virtualhost     /         Security     /         Configuration                    </title>
<meta http-equiv="Content-Language" content="en-GB"/>
    <meta name="author" content="eZ Systems"/>
    <meta name="copyright" content="eZ Systems as"/>
    <meta name="description" content="eZ Publish is an open source content management system (CMS) and an open source content management framework (CMF)."/>
    <meta name="keywords" content="cms, publish, e-commerce, content management, development framework"/>

<meta name="MSSmartTagsPreventParsing" content="TRUE"/>
<meta name="generator" content="eZ Publish"/>

<script type="text/javascript" src="https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/javascripts/tools.js"></script>
<script type="text/javascript" src="https://doc.core.ezpublish.se7enx.com/ezno2005/design/ezno2005/javascripts/dropdownmenu.js"></script>
</head>    <body onload="menuInit();">

<!-- Complete page area: START -->
<div id="page">

<!-- Header area: START -->
<div id="header">
<div id="header-insert">

<!-- User menu area: START -->
<div id="usermenu">

<div id="page-width1">

<div id="logo">
<h1><a href="https://doc.core.ezpublish.se7enx.com/"><span class="hide">eZ Systems - The Content Management Ecosystem</span></a></h1>
</div>



<p class="hide"><a href="#main">Skip to main content</a></p>

<hr class="hide"/>
<div id="searchbox">
<form action="/web/20071223171605/http://ez.no/ezsearchredirect/action" method="get">

<div class="block">
<div class="element">
<input id="searchbutton" class="button" type="submit" value="Search"/>
</div>

<div class="element searchstring">
    <label for="searchtext" class="hide">Search text:</label>
    <input id="searchtext" name="SearchText" type="text" size="12"/><br/>
    

            <div class="section">
            <label for="searcharea" class="hide">Search area:</label>
            <select id="searcharea" name="SubTreeArray[]">
                <option value="2" selected="selected">All ez.no</option>
                <option value="306">Bug reports</option>
                <option value="21358">Contributions</option>
                <option value="documentation">Documentation</option>
                <option value="308">Forum</option>
            </select>
            </div>
    </div>

</div>
</form>
</div>

<hr class="hide"/>
<h2 class="hide">User menu</h2>

<!-- User menu content: START -->
<ul>
            <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/download"><span>Downloads</span></a></li>
    <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/company/contact"><span>Contact</span></a></li>
            <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/user/login"><span>Log in</span></a></li>
        <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/user/register"><span>Register</span></a></li>
    
    <li id="language-menu">
        <a class="highlighted" title="English" href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/eng-GB.gif" width="18" height="12" alt="English"/></a>
        <a title="Deutsch" href="https://web.archive.org/web/20071223171605/http://ez.no/de/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/ger-DE.gif" width="18" height="12" alt="Deutsch"/></a>
        <a title="Português" href="https://web.archive.org/web/20071223171605/http://ez.no/br/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/por-BR.gif" width="18" height="12" alt="Português"/></a>
        <a title="Français" href="https://web.archive.org/web/20071223171605/http://ez.no/fr/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/fre-FR.gif" width="18" height="12" alt="Français"/></a>
        <a title="日本語" href="https://web.archive.org/web/20071223171605/http://ez.no/jp/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/jpn-JP.gif" width="18" height="12" alt="日本語"/></a>        
        <a title="中文" href="https://web.archive.org/web/20071223171605/http://ez.no/tw/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/chi-TW.gif" width="18" height="12" alt="中文"/></a>        
        <a title="Norsk" href="https://web.archive.org/web/20071223171605/http://ez.no/no/ezpublish/documentation/configuration/security/non_virtualhost"><img src="/ezno2005/design/ezno2005/images/nor-NO.gif" width="18" height="12" alt="Norsk"/></a>        
    </li>
</ul>
<!-- User menu content: END -->

</div>

</div>
<!-- User menu area: END -->

</div>
</div>
<!-- Header area: END --><script type="text/javascript">
<!--
var menu = new Array();

menu[0] = ['eZ Publish', '/ezpublish', 'eZ Publish Premium', '/ezpublish/premium', 'eZ Publish Now', '/ezpublish/now', 'eZ Publish On Demand', '/ezpublish/on_demand', 'Proprietary license options', '/products/proprietary_license_options', 'Certified extensions', '/products/certified_extensions', 'eZ Flow', '/ezflow', 'eZ Components', '/ezcomponents', 'eZ Find', '/ezfind', 'eZ Newsletter', '/eznewsletter', 'Expert consulting services', '/products/expert_consulting_services', 'Support', '/products/support'];
menu[1] = ['Documentation', '/doc', 'Articles', '/community/articles', 'Books', '/store/books', 'Training', '/education/training', 'Certification', '/education/certification'];
menu[2] = ['Case studies', '/customers/case_studies', 'References', '/customers/references', 'User quotes', '/customers/user_quotes', 'eZ for media', '/customers/ez_for_media'];
menu[3] = ['Worldwide Partners', '/partner/worldwide_partners', 'eZ Partner program', '/partner/ez_partner_program', 'Knowledge centre', '/partner/knowledge_centre'];
menu[4] = ['Downloads', '/download', 'Documentation', '/doc', 'News', '/developer/news', 'Developer information', '/developer/developer_information', 'Projects & contributions', '/developer/contribs', 'Forum', '/developer/forum', 'Issue tracker', '/bugs/redirect', 'Open Funding', '/developer/open_funding', 'Security', '/developer/security', 'User groups', '/developer/user_groups'];
menu[5] = ['Total Product Responsibility from eZ', '/support/total_product_responsibility_from_ez'];
menu[6] = ['Software solutions', '/store/software', 'Training', '/services/training', 'Certification', '/services/certification', 'Books', '/store/books', 'Services', '/store/services'];
menu[7] = ['News', '/company/news', 'Media & press', '/company/media_press', 'Events', '/company/events', 'Career', '/company/career', 'eZ Conference & Awards', '/company/ez_conference_awards', 'Board of Directors', '/company/board', 'eZ Crew', '/company/ez_crew', 'Contact', '/company/contact'];

-->
</script>
<div id="menuborder">

<!-- Main menu area: START -->
<div id="menu" onmouseover="menuHover();" onmouseout="tryHideSubMenues();">

<div id="mainmenu" class="float-break">
<div id="page-width2">
    <ul id="mainmenulist" class="float-break">
<li class="current"><a href="https://web.archive.org/web/20071223171605/http://ez.no/products" onmouseover="switchSubMenu( this );">Products &amp; services</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/education" onmouseover="switchSubMenu( this );">Education</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/customers" onmouseover="switchSubMenu( this );">Customers</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/partner" onmouseover="switchSubMenu( this );">Partners</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/developer" onmouseover="switchSubMenu( this );">Developer</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/support" onmouseover="switchSubMenu( this );">Support</a></li>
<li><a href="https://web.archive.org/web/20071223171605/http://ez.no/store" onmouseover="switchSubMenu( this );">Store</a></li>
<li class="last"><a href="https://web.archive.org/web/20071223171605/http://ez.no/company" onmouseover="switchSubMenu( this );">Company</a></li>
</ul>

</div>
</div>


<div id="submenu">
<div id="page-width3">
    <ul class="float-break">
                        <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish">eZ Publish</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish/premium">eZ Publish Premium</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish/now">eZ Publish Now</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish/on_demand">eZ Publish On Demand</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/products/proprietary_license_options">Proprietary license options</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/products/certified_extensions">Certified extensions</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezflow">eZ Flow</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezcomponents">eZ Components</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/ezfind">eZ Find</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/eznewsletter">eZ Newsletter</a></li>
                                <li><a href="https://web.archive.org/web/20071223171605/http://ez.no/products/expert_consulting_services">Expert consulting services</a></li>
                                <li class="last"><a href="https://web.archive.org/web/20071223171605/http://ez.no/products/support">Support</a></li>
                </ul>
</div>
</div>

<script type="text/javascript"><!--
    document.getElementById('submenu').style.display = 'none';
--></script>

</div>
<!-- Main menu area: END -->

</div>

<hr class="hide"/><!-- Path area: START -->
<div id="path">

<div id="page-width4">
<h2 class="hide">Path</h2>

<!-- Path content: START -->
<p>
                        <a href="https://web.archive.org/web/20071223171605/http://ez.no/">ez.no</a>
        
                        /
                            <a href="https://web.archive.org/web/20071223171605/http://ez.no/ezpublish">ezpublish</a>
        
                        /
                            <a href="toc.html">documentation</a>
        
                        /
                            <a href="configuration.html">configuration</a>
        
                        /
                            <a href="configuration/security.html">security</a>
        
                        /
                            non-virtualhost
        
            </p>
<!-- Path content: END -->

</div>

</div>
<!-- Path area: END -->

<hr class="hide"/>

<!-- Main area: START -->

<div id="page-width5">
<div id="main" class="float-break">

<!-- Main area content: START -->




<div class="template-design area-main-normal">
<div class="template-module content-view-full">
<div class="template-object class-documentation">


<div class="attribute-heading">
    <h1>Non-Virtualhost</h1>
</div>

<p><strong>These documentation pages are no longer maintained. Please visit the <a href="https://doc.ezpublishlegacy.se7enx.com">new documentation site.</a></strong></p>

<div class="attribute-long">
    

<p>
Securing the site depends on whether you are using a virtualhost setup or a non-virtualhost setup. A virtualhost setup means that all urls are redirected to the index.php script while non-virtualhost requires that the index.php script is mentioned in the url.
</p>

<a name="eztoc81049_1" id="eztoc81049_1"></a><h2>Virtualhost setups</h2>
<p>
Virtualhost setups are secure by default since all request are sent to index.php script, with the exception of images, stylesheets and javascripts. The only thing that is required for securing the site is to make sure all custom made templates follow the <a href="https://web.archive.org/web/20071223171605/http://ez.no/ez_publish/documentation/development/standards/template">security guidelines for templates. </a>
</p>

<a name="eztoc81049_2" id="eztoc81049_2"></a><h2>Non-Virtualhost setups</h2>
<p>
Non-Virtualhost setups are insecure by default. The index.php must explicitly be placed in the url, this means that any other scripts may be executed directly as well as open up .ini files with password information. Because of this it is not recommened to use non-virtualhost setups, however if you don't have any choice there are some guidelines which can be used to secure the site.
</p>

<p>
You also need to make sure that all custom made templates follow the <a href="https://web.archive.org/web/20071223171605/http://ez.no/">security guidelines for templates. </a>
</p>

<a name="eztoc81049_2_1" id="eztoc81049_2_1"></a><h3>Install a .htaccess file</h3>
<p>

The Apache webserver allows each site to install a .htaccess file which can control which files are accessible as well as set PHP options. The .htaccess file is placed in the root of your eZ publish installation, an example of how it may look follows. <br/>
</p>
    <pre class="wordwrap"><span class="line">&lt;FilesMatch &quot;.&quot;&gt;</span>

<span class="line">order allow,deny</span>

<span class="line">deny from all</span>

<span class="line">&lt;/FilesMatch&gt;</span>

<span class="line">&nbsp;</span>

<span class="line">&lt;FilesMatch &quot;(index.php|.(gif|jpe?g|png|css|jar|js|html))$&quot;&gt;</span>

<span class="line">order allow,deny</span>

<span class="line">allow from all</span>

<span class="line">&lt;/FilesMatch&gt;</span>

<span class="line">&nbsp;</span>

<span class="line">RewriteEngine On</span>

<span class="line">RewriteRule !.(gif|css|jpe?g|png|css|jar|js|html)$ index.php</span>

<span class="line">&nbsp;</span>

<span class="line">DirectoryIndex index.php</span></pre>
    
<a name="eztoc81049_2_2" id="eztoc81049_2_2"></a><h3>Use .ini.php files</h3>
<p>
All .ini files in eZ publish are readable when in non-virtualhost mode, this means that placing items such as usernames and passwords in these files are dangerous.
</p>

<p>
Fortunately the .ini file reader in eZ publish supports reading so called PHP wrapped .ini files. This means to create a file with the suffix .ini.php (.ini.append.php for append files), wrap it in a PHP comment and place it in the settings (settings/override for append files) directory. For instance the web setup will automatically create such files in settings/override/ for you with all the personal settings.
</p>

<a name="eztoc81049_2_3" id="eztoc81049_2_3"></a><h3>site.ini.php</h3>    <pre class="wordwrap"><span class="line">&lt;?php /*</span>

<span class="line">[DatabaseSettings]</span>

<span class="line">Server=mydbserver</span>

<span class="line">User=myuser</span>

<span class="line">Password=mypassword</span>

<span class="line">*/ ?&gt;</span></pre>
    
<a name="eztoc81049_3" id="eztoc81049_3"></a><h2>Alternative: Non-Virtualhost URL without index.php</h2>
<p>

If your Server can run mod_rewrite, you can search ezurl and replace with ezroot in all your templates, put the .htaccess file below in your space then you'll have full nice url fun in nvH environment<br/>
.htaccess<br/>
</p>
    <pre class="wordwrap"><span class="line">DirectoryIndex index.php</span>

<span class="line">&nbsp;</span>

<span class="line">&lt;FilesMatch &quot;(index.php|.(gif|html|css|jpe?g|png|ico|js|asf|avi|wmv|swf|xsl|jar|pdf|doc))$&quot;&gt;</span>

<span class="line">order allow,deny</span>

<span class="line">allow from all</span>

<span class="line">Options Indexes FollowSymLinks Includes ExecCGI</span>

<span class="line">&lt;/FilesMatch&gt;</span>

<span class="line">&nbsp;</span>

<span class="line">RewriteEngine on</span>

<span class="line"># we are reached via /&lt;path-to-ezpublish&gt;/ prefix</span>

<span class="line">#RewriteBase /&lt;path-to-ezPublish&gt;/ #if ezPublish is not in root directory take this and not the following</span>

<span class="line">RewriteBase /</span>

<span class="line">&nbsp;</span>

<span class="line"># IF URI does not end with &quot;/&quot; ###################</span>

<span class="line">RewriteCond %{REQUEST_URI} !/$</span>

<span class="line"># and IF URI does not end with &lt;anything&gt; &lt;dot&gt; &lt;something&gt;</span>

<span class="line">RewriteCond %{REQUEST_URI} ![^.]*.[php|html|gif|css|jpe?g|png|ico|js|asf|avi|wmv|swf|xsl|jar|pdf|doc]+$</span>

<span class="line">&nbsp;</span>

<span class="line">#RewriteCond %{REQUEST_URI} [index.php]+$</span>

<span class="line"># THEN append trailing slash and redirect the client (include support for SSL)</span>

<span class="line">RewriteCond %{HTTP_HOST} (.+)</span>

<span class="line">RewriteCond %{SERVER_PORT} !^443$</span>

<span class="line">RewriteRule (.*) https://%1/$1/ [L]</span>

<span class="line">&nbsp;</span>

<span class="line"># first we rewrite the root dir to the handling php script</span>

<span class="line">RewriteRule ^$ index.php [L]</span>

<span class="line">RewriteRule ^index.html$ index.php [L]</span>

<span class="line">&nbsp;</span>

<span class="line"># strip out the subdirs when the browser requests us from per dir pages</span>

<span class="line">#RewriteRule ^.+/&lt;path-to-ezPublish&gt;+/.$ $1 [L] #if ezPublish is not in root directory take this and not the following</span>

<span class="line">RewriteRule ^.+/.$/ $1 [L]</span>

<span class="line">&nbsp;</span>

<span class="line"># and now break the rewriting for local files</span>

<span class="line">#RewriteRule ^&lt;path-to-ezPublish&gt;.php.* - [L] #if ezPublish is not in root directory take this and not RewriteRule ^.php.* - [L]</span>

<span class="line">&nbsp;</span>

<span class="line"># exclude here directories or files eg. your webmail, phpadsnew, pphlogger</span>

<span class="line">#start for 3.4, for 3.0 - 3.3 replace this part with code below.</span>

<span class="line">RewriteRule ^.php.* - [L]</span>

<span class="line">RewriteRule ^design.* - [L]</span>

<span class="line">RewriteRule ^var/.*/storage.* - [L]</span>

<span class="line">RewriteRule ^var/storage.* - [L]</span>

<span class="line">RewriteRule ^var/.*/cache.* - [L]</span>

<span class="line">RewriteRule ^var/cache.* - [L]</span>

<span class="line">RewriteRule ^extension/.*/design.* - [L]</span>

<span class="line">RewriteRule ^kernel/setup/packages.* - [L]</span>

<span class="line">RewriteRule ^packages.* - [L]</span>

<span class="line">RewriteRule ^share/icons.* - [L]</span>

<span class="line">#end for 3.4</span>

<span class="line">&nbsp;</span>

<span class="line"># anything else is a subdir which gets handled by another php script</span>

<span class="line">RewriteRule !^index.php.* - [C]</span>

<span class="line">RewriteRule (.*) index.php/$1</span></pre>
    
<p>

the 3.0 - 3.3 part:<br/>
</p>
    <pre class="wordwrap"><span class="line">#start for 3.0 - 3.3</span>

<span class="line">RewriteRule ^.php.* - [L]</span>

<span class="line">RewriteRule ^design.* - [L]</span>

<span class="line">RewriteRule ^var/.*/storage.* - [L]</span>

<span class="line">RewriteRule ^var/storage.* - [L]</span>

<span class="line">RewriteRule ^var/.*/cache.* - [L]</span>

<span class="line">RewriteRule ^var/cache.* - [L]</span>

<span class="line">RewriteRule ^extension/.*/design.* - [L]</span>

<span class="line">RewriteRule ^kernel/setup/packages.* - [L]</span>

<span class="line">#end for 3.0 - 3.3</span></pre>
    
<p>

More information and discussion on this part in forum:<br/><a href="https://web.archive.org/web/20071223171605/http://ez.no/community/forum/install_configuration/htaccess_hidden_at_last">.htaccess - hidden at last</a>
</p>
</div>


<div class="content-view-children">
<div class="class-comment">
    <h1 id="comments">Comments</h1>    <div class="block float-break">
              <form method="post" action="/web/20071223171605/http://ez.no/content/action">
             <input class="button" type="submit" name="NewButton" value="New comment"/>
             <input type="hidden" name="RedirectURIAfterPublish" value="ezpublish/documentation/configuration/security/non_virtualhost#comments"/>
             <input type="hidden" name="NodeID" value="29387"/>
                             <input type="hidden" name="ClassIdentifier" value="article_comment"/>
                          <input type="hidden" name="ContentLanguageCode" value="eng-GB"/>
         </form>
         </div>


        

<div class="content-view-line">
<div class="class-comment bglight">

    
    <div id="msg112629" class="attribute-heading">
        <h2>/index.php? to /</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">Charles-Edouard Coste</p>
    <p class="date">Monday 30 October 2006 8:25:52 am</p>
</div>


<div class="attribute-short">
            Yeah, OK... That's fun. But what about url generated by ez ?<br/>
I put the .htaccess on my website and it works. If I write www.example.com/fr I go on www.example.com/index.php?/fr .<br/>
But now I just can't browse on my site because all urls are still written with index.php?.<br/>
So if I click on the home link, I go on www.example.com/index.php?/fr and it abviously doesn't work.

    </div>


</div>
</div>
    

<div class="content-view-line">
<div class="class-comment bgdark">

    
    <div id="msg66923" class="attribute-heading">
        <h2>Fix for the trailing slash problem / https problem</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">Dave Myron</p>
    <p class="date">Friday 21 January 2005 12:01:59 pm</p>
</div>


<div class="attribute-short">
            Change:<br/>
RewriteRule (.*) https://%1/$1/ [L]<br/>
<br/>
To:<br/>
RewriteRule (.*) http://%1/&lt;path to ezp&gt;/$1/ [L] # obviously remove the path info if it's installed in root<br/>
<br/>
At least that's what got my subdirectory installation of EZP to work.<br/>
<br/>
YMMV,<br/>
chicken

    </div>


</div>
</div>
    

<div class="content-view-line">
<div class="class-comment bglight">

    
    <div id="msg66922" class="attribute-heading">
        <h2>Anything missing a trailing slash redirects to https</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">Dave Myron</p>
    <p class="date">Friday 21 January 2005 11:54:32 am</p>
</div>


<div class="attribute-short">
            This:<br/>
<br/>
# IF URI does not end with &quot;/&quot; ###################<br/>
RewriteCond %{REQUEST_URI} !/$<br/>
# and IF URI does not end with &lt;anything&gt; &lt;dot&gt; &lt;something&gt;<br/>
RewriteCond %{REQUEST_URI} ![^.]*\.[php|html|gif|css|jpe?g|png|ico|js|asf|avi|wmv|swf|xsl|jar|pdf|doc]+$<br/>
<br/>
#RewriteCond %{REQUEST_URI} [index\.php]+$<br/>
# THEN append trailing slash and redirect the client (include support for SSL)<br/>
RewriteCond %{HTTP_HOST} (.+)<br/>
RewriteCond %{SERVER_PORT} !^443$<br/>
RewriteRule (.*) https://%1/$1/ [L]<br/>
<br/>
tells Apache to redirect any non-SSL requesting that doesn't end with a slash or a dot something to redirect to https (with a slash at the end).<br/>
<br/>
This is a large problem: You can't login (if you don't have HTTPS support) - The link from the home page is to /user/login and that satisfies all conditions (no trailing slash and no dot something and not using port 443) so it attempts to forward to https://&lt;domain&gt;/user/login. Not the intention.

    </div>


</div>
</div>
    

<div class="content-view-line">
<div class="class-comment bgdark">

    
    <div id="msg52826" class="attribute-heading">
        <h2>file rename win</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">Ekkehard Dörre</p>
    <p class="date">Saturday 12 June 2004 1:08:36 pm</p>
</div>


<div class="attribute-short">
            Lupas Rename<br/>
<a href="https://web.archive.org/web/20071223171605/http://www.azheavymetal.com/~lupasrename/lupasrename.php" title="http://www.azheavymetal.com/~lupasrename/lupasrename.php">http://www.azheavymetal.com/~lupasrename/lupasrename.php</a><br/>
<br/>
Greetings ekke

    </div>


</div>
</div>
    

<div class="content-view-line">
<div class="class-comment bglight">

    
    <div id="msg52561" class="attribute-heading">
        <h2>tip: quickly changing extensions</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">James Packham</p>
    <p class="date">Wednesday 09 June 2004 2:52:13 pm</p>
</div>


<div class="attribute-short">
            The settings directory contains lots of ini files. Although you shouldn't edit these (you'll lose the settings when you upgrade) you might not want people to be able to read them. I wrote this bash script to quickly change extensions on these files:<br/>
<pre class="wordwrap"><span class="line">
</span>

<span class="line">#!/bin/bash
</span>

<span class="line">FILES=`ls | grep '.ini'`
</span>

<span class="line">for file in $FILES
</span>

<span class="line">do&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">new_filename=`echo $file .php`
</span>

<span class="line">new_filename=`echo $new_filename | sed 's/ //g'`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">mv $file $new_filename&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<span class="line">done
</span>

<span class="line"></span></pre><br/>
just copy and paste into a new file (in the settings dir), chmod +x it and execute it. <b>This will change the extensions of all files in the directory where the script is located</b>

    </div>


</div>
</div>
    

<div class="content-view-line">
<div class="class-comment bgdark">

    
    <div id="msg32456" class="attribute-heading">
        <h2>security guidelines for templates.</h2>
    </div>

<div class="attribute-byline float-break">
    <p class="author">Robert Castelo</p>
    <p class="date">Tuesday 19 August 2003 8:56:57 pm</p>
</div>


<div class="attribute-short">
            The link &quot;security guidelines for templates.&quot; is dead.

    </div>


</div>
</div>


 


</div>
</div>

<div class="block float-break">
            <form method="post" action="/web/20071223171605/http://ez.no/content/action">
            <input class="button" type="submit" name="NewButton" value="New comment"/>
            <input type="hidden" name="RedirectURIAfterPublish" value="ezpublish/documentation/configuration/security/non_virtualhost#comments"/>
            <input type="hidden" name="NodeID" value="29387"/>
                           <input type="hidden" name="ClassIdentifier" value="article_comment"/>
                        <input type="hidden" name="ContentLanguageCode" value="eng-GB"/>
        </form>
    </div>

</div>
</div>
</div>


<div class="template-design area-sidebar-normal">
<div class="template-module content-view-sidebar">
<div class="template-object class-documentation">

<div class="attribute-heading">
    <h2 class="bullet">Contents</h2>
</div>
<h3><a href="configuration.html">Configuration</a></h3>
<p>
        
        
            
                    <a href="configuration/configuration.html">Configuration</a><br/>
          
	
            
                    <a href="configuration/security.html">Security</a><br/>
          
	
            &nbsp;&nbsp;&nbsp;
                    <a href="configuration/security/non_virtualhost.html"><b>Non-Virtualhost</b></a><br/>
          
	
            &nbsp;&nbsp;&nbsp;
                    <a href="configuration/security/discussions.html">Discussions</a><br/>
          
	
            &nbsp;&nbsp;&nbsp;
                    <a href="configuration/security/restrictions.html">Restrictions</a><br/>
          
	
            &nbsp;&nbsp;&nbsp;
                    <a href="configuration/security/system_security.html">System security</a><br/>
          
	
            
                    <a href="configuration/optimization.html">Optimization</a><br/>
          
	
            
                    <a href="configuration/backup_restore.html">Backup &amp; Restore</a><br/>
          
	
            
                    <a href="configuration/troubleshooting.html">Troubleshooting</a><br/>
          
	
        </p>


<hr class="docsplit"/>
<h3>Created</h3>
<p>
04/07/2003<br/>
12:31:12 pm<br/>
by Bård Farstad
</p>
<h3>Last updated</h3>
<p>
07/10/2004<br/>
6:21:56 am<br/>
by Brendan Pike
</p>
<h3>Authors</h3>
<p class="rendered">Bård Farstad<br/>Jan Borsodi<br/>Ekkehard Dörre<br/>Brendan Pike<br/></p>

<br/>
<hr class="docsplit"/>

<p>This page is part of the eZ Publish documentation. The documentation is available under the <a href="https://web.archive.org/web/20071223171605/http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License.</a> All contributions will be released under the terms of this license.</p>

</div>
</div>
</div>





<!-- Main area content: END -->

</div>
</div>

<!-- Main area: END -->

<hr class="hide"/>

<!-- Footer area: START -->
<div id="footer-design">
<div id="page-width6">
<div id="footer">

<address>Powered by eZ Publish&reg; Content Management System.<br/>
Copyright &copy;1999 - 2024 7x and 2007 eZ Systems AS (except where otherwise noted). All rights reserved.</address>

</div>
</div>
</div>
<!-- Footer area: END -->

</div>
<!-- Complete page area: END -->


    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFEDSZJYH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFEDSZJYH0');
</script>


</body>
</html>

<!-- th[eZ] 20050804 --><!--
     FILE ARCHIVED ON 17:16:05 Dec 23, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 11:18:57 Oct 31, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.471
  exclusion.robots: 0.019
  exclusion.robots.policy: 0.009
  esindex: 0.01
  cdx.remote: 26.049
  LoadShardBlock: 278.817 (3)
  PetaboxLoader3.datanode: 117.779 (4)
  PetaboxLoader3.resolve: 256.817 (3)
  load_resource: 133.974
-->